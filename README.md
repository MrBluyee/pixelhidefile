pixelhidefile 实现了将任意文件隐藏到一张图片里的功能。

环境：Python 3.6

第三方库依赖：pillow(PIL)、numpy

支持的图片格式： 只要是PIL能够支持的图片都可以，因此支持所有主流格式的图片。

支持的文件格式： 不超过图片隐写数据容量的任意格式的文件。

# 实现原理：

采用空域隐写方案的LSB（least significant bit）算法，将数据隐藏在图片的每一个像素点上，隐藏前后的图片人眼看不出差别。

# 实现过程：

# 对图片写入隐藏文件：

 1.用PIL打开图片，针对所有模式的图片统一转换成RGBA模式。RGBA模式有四个通道，一个像素点有4个byte值，对应R、G、B、A。

 2.将图片转换成数组，RGBA模式的图片转换成一个3维数组，第一维是像素高度，第二维是像素宽度，第三维是像素点。
  通过设置像素点的数值的奇偶性来存二进制数据，奇数为1，偶数为0，若要调整像素值也仅有1的波动，故人眼看不出差别。
  一个像素点可以存4bits的数据。

 3.读取要写入的文件，先写入图片的数据是头信息（dict），包含'file name'，'file size'，'file MD5'，'encryption'
 
  file name： {'file name'的开头本身可以用来判断一张图片是否经过了隐写处理，若没有读到该数据，则图片没有隐藏数据
              或已损坏。'file name'保存包含后缀的文件名数据，图片隐写完成后，生成的是与去掉后缀的文件名一致的PNG图片。
              在读取图片隐写数据完成后，生成的文件名与file name一致，UTF-8编码，支持多语言。
              
  file size： 文件的大小，单位为byte，在写入时指引写入多少数据，在读取时指引读取多少数据。
  
  file MD5： 文件的MD5值，为了保证文件的完整性。图片很容易被修改，从而导致破坏图片里隐藏的文件。读取文件数据后，
             生成MD5值与file MD5相比对，不一致则文件损坏，删掉读取的文件。
             
  encryption： 加密方式（预留）。目前版本尚未添加该功能。后续可对写入的数据进行加密处理。

 4.计算文件大小是否能够写入图片,容量不够就返回。
 
  一张图片的隐写容量 = 像素高度 * 像素宽度 * 4 (bits)
  
  要写入的数据大小 = 头数据大小(byte) * 8 + 文件大小(byte) * 8

5.读取文件的二进制流，该方式可以处理任意格式的文件，然后写入图片。

# 从图片读取隐藏文件：

1.用PIL打开图片，将图片转换成数组。

2.读取头信息，若没有读到{'file name'的开头则返回。

3.继续读取数据，读到'}'停止，提取出完整的头数据，将像素读取游标设置到'}',即头数据后。

4.根据头数据提供的文件名创建新文件。

5.继续读取像素点隐藏数据，读取总大小为头数据里提供的文件大小数值，以追加方式将读出数据逐批写入新文件中。

6.新文件写完后生成MD5值，与头信息提供的作比对。若不一致则图片中隐藏文件已损坏，删掉该新文件。一致则完成读取。
